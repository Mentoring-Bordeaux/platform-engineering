schemaVersion: 1.0.0
kind: Template
name: dotnet-api
displayName: Dotnet API Template
description: Template for a .NET backend API with Azure SQL, Key Vault, App Service, and Application Insights.
parameters:
  Name:
    type: text
    required: true
    label: Project Name
    displayName: Project Name
    description: The name prefix for all resources.
  framework:
      type: text
      required: true
      label: Framework
      displayName: Framework
      description: The framework used for the Api.
      default: dotnet
  dotnetVersion:
    type: enum
    required: false
    label: .NET Version
    displayName: .NET Version
    description: The version of .NET for the App Service.
    values:
      - "10.0"
      - "8.0"
      - "7.0"
      - "6.0"
    default: "10.0"
  sku:
    type: enum
    required: false
    label: App Service Plan SKU
    displayName: App Service Plan SKU
    description: SKU for the App Service Plan.
    values:
      - B1
      - B2
      - B3
      - S1
      - S2
      - S3
    default: B1
  adminLogin:
    type: text
    required: true
    label: SQL Admin Login
    displayName: SQL Admin Login
    description: Administrator login for SQL Server.
    default: sqladminuser
  adminPassword:
    type: password
    required: true
    label: SQL Admin Password
    displayName: SQL Admin Password
    description: Administrator password for SQL Server.
resources:
  - type: azure.resource-group
    name: rg
  - type: azure.keyvault
    name: kv
  - type: azure.sql-server
    name: sqlserver
  - type: azure.sql-database
    name: database
  - type: azure.operationalinsights
    name: logworkspace
  - type: azure.app-service-plan
    name: appserviceplan
  - type: azure.web-app
    name: apiapp
  - type: azure.application-insights
    name: appinsights
